<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tirada de Cartas - Madame Lunara</title>
  <style>
    body {
      background-color: #1b1124;
      color: #f3e6ff;
      font-family: 'Georgia', serif;
      text-align: center;
      padding: 20px;
    }

    h1 {
      margin-bottom: 10px;
    }

    #cartas {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .carta-revelada {
      background: #2d1a38;
      border-radius: 12px;
      padding: 10px;
      max-width: 150px;
      box-shadow: 0 0 15px #b267ff66;
    }

    .carta-revelada img {
      width: 100%;
      border-radius: 8px;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #7326c9;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 0 10px #b267ff88;
      transition: transform 0.2s;
    }

    button:hover {
      transform: scale(1.05);
    }

    #interpretacion {
      margin-top: 30px;
      max-width: 700px;
      margin-inline: auto;
      background: #2d1a38;
      padding: 15px 20px;
      border-radius: 12px;
      box-shadow: 0 0 15px #b267ff99;
      font-style: italic;
    }
  </style>
</head>
<body>
  <h1>🔮 Tirada de Cartas del Tarot</h1>
  <p>Concentrate en tu pregunta y presioná el botón.</p>
  <button onclick="tirarCartas()">Tirar las cartas</button>

  <div id="cartas"></div>
  <div id="interpretacion"></div>

  <script>
    const mazo = [
      { nombre: "El Loco", img: "https://upload.wikimedia.org/wikipedia/commons/5/5f/RWS_Tarot_00_Fool.jpg", significado: "Nuevos comienzos, libertad, aventura." },
      { nombre: "El Mago", img: "https://upload.wikimedia.org/wikipedia/commons/d/de/RWS_Tarot_01_Magician.jpg", significado: "Poder personal, manifestación, acción." },
      { nombre: "La Sacerdotisa", img: "https://upload.wikimedia.org/wikipedia/commons/8/88/RWS_Tarot_02_High_Priestess.jpg", significado: "Intuición, misterio, sabiduría oculta." },
      { nombre: "La Emperatriz", img: "https://upload.wikimedia.org/wikipedia/commons/d/d2/RWS_Tarot_03_Empress.jpg", significado: "Fertilidad, abundancia, creatividad." },
      { nombre: "El Emperador", img: "https://upload.wikimedia.org/wikipedia/commons/c/c3/RWS_Tarot_04_Emperor.jpg", significado: "Estabilidad, autoridad, estructura." },
      { nombre: "El Papa", img: "https://upload.wikimedia.org/wikipedia/commons/8/8d/RWS_Tarot_05_Hierophant.jpg", significado: "Tradición, espiritualidad, guía." },
      { nombre: "Los Enamorados", img: "https://upload.wikimedia.org/wikipedia/commons/3/3a/TheLovers.jpg", significado: "Amor, elecciones, unión." },
      { nombre: "El Carro", img: "https://upload.wikimedia.org/wikipedia/commons/3/3a/RWS_Tarot_07_Chariot.jpg", significado: "Voluntad, dirección, victoria." },
      { nombre: "La Justicia", img: "https://upload.wikimedia.org/wikipedia/commons/c/c8/RWS_Tarot_08_Justice.jpg", significado: "Equilibrio, verdad, responsabilidad." },
      { nombre: "El Ermitaño", img: "https://upload.wikimedia.org/wikipedia/commons/4/4d/RWS_Tarot_09_Hermit.jpg", significado: "Introspección, sabiduría interior." },
      { nombre: "La Rueda de la Fortuna", img: "https://upload.wikimedia.org/wikipedia/commons/3/3c/RWS_Tarot_10_Wheel_of_Fortune.jpg", significado: "Destino, cambios, ciclos de la vida." },
      { nombre: "La Fuerza", img: "https://upload.wikimedia.org/wikipedia/commons/f/f5/RWS_Tarot_11_Strength.jpg", significado: "Valor, control interior, paciencia." },
      { nombre: "El Colgado", img: "https://upload.wikimedia.org/wikipedia/commons/2/2b/RWS_Tarot_12_Hanged_Man.jpg", significado: "Rendición, nueva perspectiva, pausa." },
      { nombre: "La Muerte", img: "https://upload.wikimedia.org/wikipedia/commons/d/d7/RWS_Tarot_13_Death.jpg", significado: "Transformación profunda, fin de ciclo." },
      { nombre: "La Templanza", img: "https://upload.wikimedia.org/wikipedia/commons/f/f8/RWS_Tarot_14_Temperance.jpg", significado: "Armonía, moderación, sanación." },
      { nombre: "El Diablo", img: "https://upload.wikimedia.org/wikipedia/commons/9/90/RWS_Tarot_15_Devil.jpg", significado: "Ataduras, vicios, sombras personales." },
      { nombre: "La Torre", img: "https://upload.wikimedia.org/wikipedia/commons/5/53/RWS_Tarot_16_Tower.jpg", significado: "Colapso de estructuras, revelaciones." },
      { nombre: "La Estrella", img: "https://upload.wikimedia.org/wikipedia/commons/d/db/RWS_Tarot_17_Star.jpg", significado: "Esperanza, inspiración, renovación." },
      { nombre: "La Luna", img: "https://upload.wikimedia.org/wikipedia/commons/7/7f/RWS_Tarot_18_Moon.jpg", significado: "Ilusiones, intuición, mundo interior." },
      { nombre: "El Sol", img: "https://upload.wikimedia.org/wikipedia/commons/1/17/RWS_Tarot_19_Sun.jpg", significado: "Alegría, claridad, éxito." },
      { nombre: "El Juicio", img: "https://upload.wikimedia.org/wikipedia/commons/d/dd/RWS_Tarot_20_Judgement.jpg", significado: "Renacimiento, llamado interno, juicio final." },
      { nombre: "El Mundo", img: "https://upload.wikimedia.org/wikipedia/commons/f/ff/RWS_Tarot_21_World.jpg", significado: "Plenitud, logro, realización total." }
    ];

    async function interpretarTirada(cartas) {
      const res = await fetch("/.netlify/functions/lunara", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ cartas })
      });
      const data = await res.json();
      document.getElementById("interpretacion").innerHTML = `
        <h2>🌙 Interpretación de Madame Lunara</h2>
        <p>${data.interpretacion}</p>
      `;
    }

    function tirarCartas() {
      const seleccionadas = [];
      while (seleccionadas.length < 3) {
        const carta = mazo[Math.floor(Math.random() * mazo.length)];
        if (!seleccionadas.includes(carta)) seleccionadas.push(carta);
      }

      document.getElementById("cartas").innerHTML = seleccionadas.map(carta => `
        <div class="carta-revelada">
          <img src="${carta.img}" alt="${carta.nombre}" />
          <p><strong>${carta.nombre}</strong>: ${carta.significado}</p>
        </div>
      `).join("");

      const nombres = seleccionadas.map(c => c.nombre);
      interpretarTirada(nombres);
    }
  </script>
</body>
</html>
